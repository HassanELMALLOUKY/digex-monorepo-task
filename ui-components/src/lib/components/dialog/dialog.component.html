<form [formGroup]="form">
  <div formArrayName="lines">
    <div *ngFor="let line of lines.controls; let i = index" [formGroupName]="i">
      @if (data.inputType === InputType.DATE && i==0) {
        <mat-form-field style="width: 90%;">
          <mat-label>Choose a date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="line">
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>  
      } @else {
        <mat-form-field appearance="outline" style="width: 90%;">
        <mat-label>Line {{ i + 1 }}</mat-label>
        <input matInput formControlName="line" type="text"/>
      </mat-form-field>
      }
      <mat-icon (click)="removeLine(i)" style="color: red; margin-left: 10px;">delete_forever</mat-icon>
    </div>
  </div>
  <a class="add-line" (click)="addLine()">
        <mat-icon>add</mat-icon>
        <span>ADD LINE</span>
      </a>
      <mat-divider></mat-divider>
          <div>
            <p class="font-weight-bold-preview">Preview</p>
            @for (item of form.value.lines; track $index) {
              @if ($index==0 && data.inputType==InputType.DATE ){
                <p class="item-preview">Date: {{ item | lineToString| date: "MM.dd.YYYY" }}</p>
              } @else {
                <p class="item-preview">{{ item | lineToString  }}</p>
              }
            }
        
            </div>
      <mat-divider></mat-divider>
</form>
<button type="button" mat-raised-button color="primary" (click)="cancel()">Cancel</button>
<button type="button" mat-raised-button color="primary" (click)="save()">Save</button>


